---
import { getCollection } from "astro:content";

type MenuLink = { label: string; slug: string };

// Carrega categorias do content e monta os links do “pills”
const cats = await getCollection("categories"); // cada JSON tem: { label, slug, showInMenu?, order? }

const links: MenuLink[] = cats
  .filter((c) => c.data.showInMenu !== false) // default: mostra
  .sort((a, b) => (a.data.order ?? 999) - (b.data.order ?? 999))
  .map(({ data }) => ({ label: data.label, slug: data.slug }));
---

{links.length ? (
  <nav aria-label="Categorias" class="w-full">
    <ul class="flex flex-wrap gap-2">
      {links.map((item) => (
        <li>
          <a
            href={`/categories/${item.slug}`}
            class="inline-flex items-center rounded px-2.5 py-1 text-[11px] font-semibold uppercase tracking-[0.2em]
                   text-secondary-text hover:text-primary-text ui-transition
                   bg-transparent hover:bg-surface-bg/30"
          >
            {item.label}
          </a>
        </li>
      ))}
    </ul>
  </nav>
) : null}
