---
import type { CollectionEntry } from "astro:content";
import PageLayout from "./PageLayout.astro";
import ShareButton from "@/components/Utils/ShareButton.svelte";

const { title, description, pubDate, author, heroImage, heroImageAlt, category } =
  Astro.props.data as CollectionEntry<"blogs">["data"];
const formattedDate = pubDate.toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
const shareUrl = Astro.site
  ? new URL(Astro.url.pathname, Astro.site).toString()
  : Astro.url.href;
---

<PageLayout title={title} description={description}>
  <article class="mx-auto flex w-full max-w-3xl flex-col gap-12 py-6 sm:py-10">
    <header class="flex flex-col gap-6">
      <p class="text-xs font-semibold uppercase tracking-[0.35em] text-muted-text">
        {category}
      </p>
      <h1 class="font-display text-4xl leading-tight text-primary-text sm:text-5xl">
        {title}
      </h1>
      <p class="text-lg text-secondary-text">{description}</p>
      <div class="flex flex-wrap items-center gap-3 max-[360px]:flex-col max-[360px]:items-start">
        <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-secondary-text">
          <span class="font-semibold text-primary-text">By {author}</span>
          <span aria-hidden="true">â€¢</span>
          <time datetime={pubDate.toISOString()}>{formattedDate}</time>
        </div>
        <ShareButton client:idle url={shareUrl} title={title} />
      </div>
      {heroImage && (
        <figure class="overflow-hidden rounded-xl border border-border-ink/70 bg-surface-bg">
          <img src={heroImage} alt={heroImageAlt ?? title} class="h-full w-full object-cover" loading="lazy" />
        </figure>
      )}
    </header>
    <section class="flex flex-col gap-10">
      <slot />
    </section>
  </article>
</PageLayout>
