---
// src/layouts/BlogLayout.astro
import type { CollectionEntry } from "astro:content";
import PageLayout from "./PageLayout.astro";
import ShareButton from "@/components/Utils/ShareButton.svelte";

const {
  title,
  description,
  pubDate,
  author,
  heroImage,     // mantidos para futuro
  heroImageAlt,
  category,
} = Astro.props.data as CollectionEntry<"blogs">["data"];

const formattedDate = pubDate.toLocaleDateString("pt-BR", {
  day: "2-digit",
  month: "long",
  year: "numeric",
});

const shareUrl = Astro.site
  ? new URL(Astro.url.pathname, Astro.site).toString()
  : Astro.url.href;
---

<PageLayout title={title} description={description}>
  <!-- Mesmas larguras da home + menos espaçamento vertical -->
  <article class="mx-auto w-full md:max-w-[46rem] lg:max-w-[50rem] xl:max-w-[52rem] flex flex-col gap-6 md:gap-8 pt-0 pb-0">
    <header class="flex flex-col gap-2 md:gap-3">
      <!-- Categoria com as mesmas classes da home -->
      <p class="text-[12px] font-semibold uppercase tracking-[0.14em] text-muted-text">
        {category}
      </p>

      <!-- Título centralizado -->
      <h1 class="mt-0.5 text-3xl md:text-5xl font-bold leading-snug text-primary-text text-balance text-center">
        {title}
      </h1>
    </header>

    <!-- Corpo: remove margem do último nó da .prose -->
    <section class="mt-6 md:mt-8 flex flex-col [&_.prose>:last-child]:mb-0">
      <slot />
    </section>

    <!-- Meta no rodapé: menos espaço acima/abaixo e itens mais próximos -->
    <footer aria-label="Metadados da publicação" class="-mt-10 md:-mt-12 mb-0 flex justify-end">
      <div class="flex flex-wrap items-center gap-x-1 gap-y-1 text-sm text-secondary-text">
        <span class="font-semibold text-primary-text">Por {author}</span>
        <span class="mx-1" aria-hidden="true">•</span>
        <time datetime={pubDate.toISOString()}>{formattedDate}</time>
        <span class="-ml-1 sm:-ml-2">
          <ShareButton client:idle url={shareUrl} title={title} />
        </span>
      </div>
    </footer>
  </article>
</PageLayout>
