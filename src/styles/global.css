/* Global primitives */
@import url("https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@300;400;500;600;700&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========== BASE (dark + light) ======================================= */
@layer base {
  :root {
    --radius: 3px;

    /* ðŸŽ¯ DARK tokens (padrÃ£o do site) */
    --primary-bg: 11 12 11;
    --surface-bg: 24 22 21;
    --card-bg: 11 12 11;
    --border-ink: 78 73 68;
    --primary-text: 240 236 230;
    --secondary-text: 208 202 195;
    --muted-text: 166 160 153;

    --nav-speed: 200ms;
    --nav-ease: cubic-bezier(0.2, 0.8, 0.2, 1);

    color-scheme: dark;
  }

  /* ðŸ‘‡ Tema CLARO (apenas estes valores foram escurecidos) */
  [data-theme="light"] {
    --primary-bg: 249 249 248;   /* fundo */
    --surface-bg: 255 255 255;   /* painÃ©is */
    --card-bg: 249 249 248;
    --border-ink: 209 205 198;

    --primary-text: 28 28 27;    /* mantÃ©m o preto */
    --secondary-text: 38 38 36;  /* antes: 56 56 54 â†’ mais escuro */
    --muted-text: 78 76 72;      /* antes: 106 103 98 â†’ mais escuro */

    color-scheme: light;
  }

  html { scrollbar-gutter: stable both-edges; }
  @supports not (scrollbar-gutter: stable) { html { overflow-y: scroll; } }

  *, *::before, *::after { box-sizing: border-box; }

  body {
    @apply bg-primary-bg text-primary-text font-body antialiased;
    margin: 0;
    min-height: 100vh;
    line-height: 1.6;
    transition: background-color var(--nav-speed) var(--nav-ease),
                color var(--nav-speed) var(--nav-ease);
  }

  main { background-color: transparent; }

  a { color: inherit; }
  a:hover, a:focus { color: rgb(var(--secondary-text)); }

  h1,h2,h3,h4,h5,h6 {
    font-family: "Source Sans 3","Source Sans Pro",ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    font-weight: 700;
    letter-spacing: 0;
  }

  ::selection { background: rgba(208,202,195,0.18); }

  img { max-width: 100%; display: block; }
  code { font-family: "Fira Code","SFMono-Regular",Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace; }

  pre {
    background: rgb(var(--surface-bg));
    border: 1px solid rgb(var(--border-ink));
    border-radius: var(--radius);
    padding: 1.5rem;
    overflow-x: auto;
  }

  :where(
    .rounded,.rounded-sm,.rounded-md,.rounded-lg,.rounded-xl,.rounded-2xl,.rounded-3xl,
    [class*="rounded-"]:not(.rounded-full)
  ){ border-radius: var(--radius) !important; }
}

/* ========== COMPONENTS =============================================== */
@layer components {
  .nav-link {
    transition-property: color, border-color;
    transition-duration: var(--nav-speed);
    transition-timing-function: var(--nav-ease);
    border-bottom-width: 1px;
    border-color: transparent;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  .nav-transition { transition-duration: var(--nav-speed); transition-timing-function: var(--nav-ease); }
  .ui-transition { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-duration: var(--nav-speed); transition-timing-function: var(--nav-ease); }
  .ui-focus { @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-text; }

  .site-container { @apply mx-auto w-full px-4 sm:px-6 lg:px-8; }
  .site-narrow    { @apply md:max-w-[46rem] lg:max-w-[50rem] xl:max-w-[52rem]; }
}

/* ========== UTILITIES ================================================= */
@layer utilities {
  :where(
    .rounded,.rounded-sm,.rounded-md,.rounded-lg,.rounded-xl,
    .rounded-2xl,.rounded-3xl,.rounded-full,[class*="rounded-"]
  ){ border-radius: var(--radius) !important; }

  @media (max-width: 767.98px){
    .prose pre, .prose pre code { font-size: .8rem; line-height: 1.5; }
    .prose pre { padding: .85rem 1rem; }
    .prose :not(pre) > code { font-size: .8rem; }
    .prose .mermaid { font-size: .85rem; }
  }

  .clamp-1,.clamp-2{ display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden; }
  .clamp-1{ -webkit-line-clamp: 1; }
  .clamp-2{ -webkit-line-clamp: 2; }
}

/* ========== PRINT ===================================================== */
@media print {
  :root { color-scheme: light; }
  body { background: #fff; color: #000; }
}
